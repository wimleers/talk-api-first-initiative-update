<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>API-first initiative</title>

		<link rel="stylesheet" href="src/reveal.js/css/reveal.css">
		<link rel="stylesheet" href="src/reveal.js/css/theme/black.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="src/reveal.js/lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'src/reveal.js/css/print/pdf.css' : 'src/reveal.js/css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
				<section id="intro">
					<h2>API-first initiative</h2>
					<table>
						<tr>
							<td>
								<p>Mateu AguilÃ³ Bosch
									<br><small style="vertical-align: baseline">Drupal.org: e0ipso
									<br><a href="https://twitter.com/e0ipso">@e0ipso</a>
									<br>&nbsp;
									<br>
									<br>Senior Developer
									<br><img src="img/lullabot_robot.svg" alt="Lullabot logo" style="border:none;height:2em;background:none;"></small>
							</td>
							<td>
								<p>Wim Leers
									<br><small style="vertical-align: baseline">Drupal.org: Wim Leers
									<br><a href="https://twitter.com/wimleers">@wimleers</a>
									<br><a href="https://wimleers.com/">wimleers.com</a>
									<br>
									<br>Principal Software Engineer, OCTO
									<br><img src="img/acquia.png" alt="Acquia logo" style="border:none;height:1em;background:none;"></small>
								</p>
							</td>
						</tr>
					</table>
				</section>

				<section>
					<section id="overview">
						<h3>What we'll cover</h3>
						<ul>
							<li>Vision</li>
							<li>Goals</li>
							<li>Roadmap</li>
							<li>Ecosystem</li>
							<li>Outstanding challenges</li>
							<li>Open discussion</li>
						</ul>
					</section>
				</section>

				<section id="audience-quick-questionnaire">
					<h3>Quick  questionnaire! ğŸ“</h3>
					<ul style="font-size: 80%">
						<li>Who has worked on decoupled Drupal projects?
							<ul>
								<li class="fragment">If <q>yes</q>,
									<ul>
										<li>&gt;1 year ago? <span class="fragment">&gt;6 months ago? <span class="fragment">&lt;6 months ago/now?</span></span></li>
										<li class="fragment">was it critical to the overall project?</li>
									</ul>
								</li>
								<li class="fragment">If <q>no</q>, would you like to in the future?</li>
							</ul>
						</li>
						<li class="fragment">Did you use
							<ul>
								<li>Core's REST module? <span class="fragment">and the contrib REST UI module?</span>
									<ul>
										<li class="fragment">Did it noticeably improve in the past year?</li>
									</ul>
								</li>
								<li class="fragment">JSON API?</li>
								<li class="fragment">GraphQL?</li>
								<li class="fragment">RELAXed Web Services/CouchDB?</li>
								<li class="fragment">A combination?</li>
							</ul>
						</li>
					</ul>
					âœï¸
				</section>

				<section>
					<section id="vision">
						<p>Vision</p>
					</section>
					<section id="vision--driesquote">
						<figure>
							<blockquote>I believe that it is important to have <u>first-class web services</u> in Drupal out of the box in order to enable <u>top-notch APIs</u> and continue our evolution to become <u>API-first</u>.</blockquote>
							<figcaption>â€” Dries Buytaert</figcaption>
						</figure>
					</section>
					<section id="vision--platform">
						<h4>An unparallelled API-first platform</h4>
						<p>All data available:</p>
						<ul>
							<li><strong>RESTfully</strong>
								<ul>
									<li>in any format <sup><small>(JSON, HAL+JSON â€¦)</small></sup></li>
									<li>in multiple flavors <sup><small>("HTTP purist", <code>jsonapi.org</code> â€¦)</small></sup></li>
								</ul>
							</li>
							<li><strong>non-RESTfully</strong>
								<ul>
									<li>via GraphQL</li>
									<li>via CouchDB protocol, for replication &amp; syncing</li>
								</ul>
							</li>
						</ul>
						<p>â€¦ using any authentication mechanism <sup><small>(Cookie, Basic Auth, OAuth 2.0)</small></sup></p>
					</section>
					<section id="vision--growing-interest">
						<p>People <strike>want</strike> <strong>need</strong> this!</p>
						<hr>
						<p>We talked about this a lot:</p>
						<ul>
							<li>DrupalCon Baltimore: 12 sessions, 1 training</li>
							<li><a href="https://decoupleddevdays.com/">Decoupled Dev Days</a></li>
							<li>â€¦</li>
						</ul>
					</section>
				</section>

				<section>
					<section id="goals">
						<p>Goals</p>
					</section>
					<section id="goals--now">
						<dl>
							<dt>Must have</dt>
							<dd class="fragment">
								<ul>
								<li><del>Make D8 REST usable</del> <span class="fragment">âœ…</span></li>
								<li>Make D8 REST best-in-class <span class="fragment">ğŸ‹ï¸ğŸ‹ï¸ğŸ‹ï¸</span></li>
								<li>Excellent docs via OpenAPI <span class="fragment">ğŸ‹ï¸ğŸ‹ï¸ğŸ‹ï¸</span></li>
								</ul>
							</dd>
							<dt>Should have</dt>
							<dd class="fragment">
								<ul>
									<li><del>JSON API</del> <span class="fragment">âœ…</span></li>
									<li><del>Gra</del>phQL <span class="fragment">ğŸ‹ï¸ğŸ‹ï¸ğŸ‹ï¸ â€¦ âœ…</span></li>
									<li>Workflows: UUID and revision</li>
								</ul>
							</dd>
							<dt>Could have</dt>
							<dd class="fragment">
								<ul>
									<li>OAuth 2.0 support <span class="fragment">âœ…</span></li>
									<li>CouchDB support <span class="fragment">ğŸ‹ï¸ğŸ‹ï¸</span></li>
								</ul>
							</dd>
						</dl>
					</section>
					<section id="goals--6-months-ago">
						<h3>Goals (6 months ago)</h3>
						<dl>
							<dt>Must have</dt>
							<dd>
								<ul>
								<li><del>Make D8 REST usable</del> <span>âœ…</span></li>
								<li>Make D8 REST best-in-class <span>ğŸ‹ï¸ğŸ‹ï¸</span></li>
								<li>Excellent docs via OpenAPI <span>ğŸ‹ï¸ğŸ‹ï¸</span></li>
								</ul>
							</dd>
							<dt>Should have</dt>
							<dd>
								<ul>
									<li><del>JSON API</del> <span>âœ…</span></li>
									<li>GraphQL <span>ğŸ‹ï¸ğŸ‹ï¸</span></li>
									<li>Workflows: UUID and revision</li>
								</ul>
							</dd>
							<dt>Could have</dt>
							<dd>
								<ul>
									<li>OAuth 2.0 support <span>ğŸ‹ï¸</span></li>
									<li>CouchDB support <span>ğŸ‹ï¸ğŸ‹ï¸</span></li>
								</ul>
							</dd>
						</dl>
					</section>
					<section id="goals--12-months-ago">
						<h3>Goals (12 months ago)</h3>
						<dl>
							<dt>Must have</dt>
							<dd>
								<ul>
								<li><del>Make D8 REST usable</del> <span>âœ…</span></li>
								<li>Make D8 REST best-in-class <span>ğŸ‹ï¸</span></li>
								<li>Excellent docs via OpenAPI <span>ğŸ‹ï¸</span></li>
								</ul>
							</dd>
							<dt>Should have</dt>
							<dd>
								<ul>
									<li>JSON API <span>ğŸ‹</span></li>
									<li>GraphQL</li>
									<li>Workflows: UUID and revision</li>
								</ul>
							</dd>
							<dt>Could have</dt>
							<dd>
								<ul>
									<li>OAuth 2.0 support</li>
									<li>CouchDB support <span>ğŸ‹ï¸</span></li>
								</ul>
							</dd>
						</dl>
					</section>
					<section id="goals--why">
						<h3>Why?</h3>
						<dl>
							<dt>REST API</dt>
							<dd class="fragment" style="font-size: 80%">
								<ul>
									<li>Multiple formats</li>
									<li>Non-entity REST resources</li>
									<li>Very configurable</li>
								</ul>
							</dd>
							<dt>JSON API <em>â†’ stable <small>8.3 contrib</small> â†’ mature <small>8.4â€“5 contrib</small> â†’ core <small>8.6</small></em></dt>
							<dd class="fragment" style="font-size: 80%">
								<ul>
									<li>Opinionated spec â‡’ better tooling, less bikeshedding
									<li>Collection support â‡’ <del>custom REST export views</del>
									<li>Not configurable: any entity that Entity Access allows</li>
								</ul>
							</dd>
							<dt>GraphQL <em>â†’ stable <small>8.4â€“5 contrib</small></em></dt>
							<dd class="fragment" style="font-size: 80%">
								Great for UI components to fetch only necessary data!
							</dd>
							<dt>Excellent docs via OpenAPI <em>â†’ stable <small>8.4â€“5 contrib</small></em></dt>
							<dd class="fragment" style="font-size: 80%">
								Starting is too painful â‡’ docs with interactive examples
							</dd>
						</dl>
					</section>
				</section>

				<section>
					<section id="roadmap">
						<p>Roadmap</p>
					</section>
					<section id="roadmap--current-focus">
						<h3>Current focus</h3>
						<dl>
							<dt>REST API <em>â†’ best in class</em></dt>
							<dd class="fragment" style="font-size: 80%">
								Missing: translations, modifying config, <del>file uploads</del>.
								<br>
								<em class="fragment">Much is blocked on subsystems in Drupal 8.</em>
							</dd>
							<dt>JSON API <em>â†’ mature <small>8.4â€“5 contrib</small> â†’ core <small>8.6</small></em></dt>
							<dd class="fragment" style="font-size: 80%">
								Missing: <del>comprehensive test coverage, plus</del> the above.
							</dd>
							<dt>GraphQL <em>â†’ stable <small>8.4â€“5 contrib</small></em></dt>
							<dd class="fragment" style="font-size: 80%">
								Missing: sites using it, to stabilize + smaller scope.
							</dd>
							<dt>Excellent docs via OpenAPI </dt>
							<dd class="fragment" style="font-size: 80%">
								12 mo ago: competition <small>(<code>rest_api_doc</code>, Schemata, Docson, OpenAPI)</small>
								<br>
								Now: standardizing on OpenAPI!
							</dd>
						</dl>
					</section>
					<section id="roadmap--team">
						<h3>Team</h3>
						<dl>
							<dt>Wim Leers</dt>
							<dd>Initiative coordinator <small>(esp. REST + Serialization + JSON API)</small></dd>
							<dt>e0ipso</dt>
							<dd>JSON API coordinator + OAuth 2.0</dd>
							<dt>gabesullice</dt>
							<dd>JSON API</dd>
							<dt>tedbow</dt>
							<dd>OpenAPI + REST + Serialization + jsdrupal</dd>
							<dt>richgerdes</dt>
							<dd>OpenAPI</dd>
						</dl>
					</section>
					<section id="roadmap--help">
						<figure>
							<img src="img/help.gif">
							<figcaption>Help wanted ğŸ˜¸</figcaption>
						</figure>
					</section>
				</section>
				<section id="ecosystem">
					<section id="ecosystem--ecosystem">
						<p>Ecosystem</p>
					</section>
					<section id="ecosystem--tooling">
						<h4>Tooling</h4>
						<img src="img/waterwheel.png" style="background: white">
						<p>
							<a href="https://github.com/acquia/waterwheel.js">github.com/acquia/waterwheel.js</a>
							<br>
							<a href="https://github.com/acquia/waterwheel.swift">github.com/acquia/waterwheel.swift</a>
						</p>
					</section>
					<section id="ecosystem--distributions">
						<h4>Distributions</h4>
						<dl>
							<dt><u>Contenta</u> â€” <a href="http://www.contentacms.org/">contentacms.org</a></dt>
							<dd><em>Productivity boost for Decoupled Drupalists</em></dd>
							<dd>(Keeps Drupalisms + provides example apps!)</dd>
							<dt style="margin-top: 1em"><u>Reservoir</u> â€” <a href="https://github.com/acquia/reservoir">github.com/acquia/reservoir</a></dt>
							<dd><em>Empower non-Drupalists</em></dd>
							<dd>(Simplicity first: only 7 concepts!)</dd>
						</dl>
						<aside class="notes".>
							Contenta is a superset of Reservoir. Both use JSON API + OpenAPI. Cross-pollination.
						</aside>
					</section>

				</section>
				<section>
					<section id="outstanding-challenges">
						<p>Outstanding challenges</p>
					</section>
					<section id="outstanding-challenges--details">
						<dl>
							<dt>Image styles</dt>
							<dd>for responsive images</dd>
							<dt>Improve DX further</dt>
							<dd>entity validation error responses, field aliasing â€¦</dd>
							<dt>Dogfooding</dt>
							<dd>let Drupal core functionality consume HTTP APIs</dd>
							<dt>API versioning</dt>
							<dd>ğŸ˜±</dd>
							<dt>â€¦</dt>
						</dl>
					</section>
				</section>

				<section id="discuss">
					<section id="discuss--start">
						<h3>Open discussion</h3>
					</section>
					<section id="discuss--too-quiet">
						<p>You are too quietâ€¦</p>
					</section>
					<section id="discuss--q1">
						<p>How much of this should we have in Drupal core?</p>
					</section>
					<section id="discuss--q2">
						<p>What are the best places to start dogfooding this?</p>
					</section>
					<section id="discuss--q3">
						<p>What features are you excited about? Why?</p>
					</section>
					<section id="discuss--q4">
						<p>What authentication providers should we add?</p>
					</section>
					<section id="discuss--q5">
						<p>Do we support decoupled admin interfaces?</p>
					</section>
				</section>
			</div>
		</div>

		<script src="src/reveal.js/lib/js/head.min.js"></script>
		<script src="src/reveal.js/js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,
				showNotes: !window.location.search.match( /no-notes/gi ),

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'src/reveal.js/plugin/markdown/marked.js' },
					{ src: 'src/reveal.js/plugin/markdown/markdown.js' },
					{ src: 'src/reveal.js/plugin/notes/notes.js', async: true },
					{ src: 'src/reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
	</body>
</html>
